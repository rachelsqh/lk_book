<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="765pt" height="1893pt"
 viewBox="0.00 0.00 765.00 1893.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1889)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1889 761,-1889 761,4 -4,4"/>
<text text-anchor="middle" x="378.5" y="-7.8" font-family="Times,serif" font-size="14.00">platform_device_register流程</text>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<polygon fill="none" stroke="black" points="8,-1658 8,-1877 325,-1877 325,-1658 8,-1658"/>
<text text-anchor="middle" x="166.5" y="-1861.8" font-family="Times,serif" font-size="14.00">platform_device_register(struct platform_device *pdev</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_1</title>
<polygon fill="none" stroke="black" points="210,-1357 210,-1650 500,-1650 500,-1357 210,-1357"/>
<text text-anchor="middle" x="355" y="-1634.8" font-family="Times,serif" font-size="14.00">driver_device_add：struct platform_device *pdrv</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_2</title>
<polygon fill="none" stroke="black" points="373,-31 373,-1349 749,-1349 749,-31 373,-31"/>
<text text-anchor="middle" x="561" y="-1333.8" font-family="Times,serif" font-size="14.00">device_add: struct device *dev</text>
</g>
<!-- a0 -->
<g id="node1" class="node">
<title>a0</title>
<polygon fill="none" stroke="black" points="258.5,-1846 73.5,-1846 73.5,-1810 258.5,-1810 258.5,-1846"/>
<text text-anchor="middle" x="166" y="-1824.3" font-family="Times,serif" font-size="14.00">device_initialize(&amp;pdev&#45;&gt;dev)</text>
</g>
<!-- a1 -->
<g id="node2" class="node">
<title>a1</title>
<polygon fill="none" stroke="black" points="258.5,-1774 73.5,-1774 73.5,-1738 258.5,-1738 258.5,-1774"/>
<text text-anchor="middle" x="166" y="-1752.3" font-family="Times,serif" font-size="14.00">setup_pdev_dma_masks(pdev)</text>
</g>
<!-- a0&#45;&gt;a1 -->
<g id="edge1" class="edge">
<title>a0:s&#45;&gt;a1:n</title>
<path fill="none" stroke="black" d="M166,-1810C166,-1810 166,-1794.86 166,-1784.22"/>
<polygon fill="black" stroke="black" points="169.5,-1784 166,-1774 162.5,-1784 169.5,-1784"/>
</g>
<!-- a2 -->
<g id="node3" class="node">
<title>a2</title>
<polygon fill="none" stroke="black" points="249.5,-1702 82.5,-1702 82.5,-1666 249.5,-1666 249.5,-1702"/>
<text text-anchor="middle" x="166" y="-1680.3" font-family="Times,serif" font-size="14.00">platform_device_add(pdev)</text>
</g>
<!-- a1&#45;&gt;a2 -->
<g id="edge2" class="edge">
<title>a1:s&#45;&gt;a2:n</title>
<path fill="none" stroke="black" d="M166,-1738C166,-1738 166,-1722.86 166,-1712.22"/>
<polygon fill="black" stroke="black" points="169.5,-1712 166,-1702 162.5,-1712 169.5,-1712"/>
</g>
<!-- b0 -->
<g id="node4" class="node">
<title>b0</title>
<polygon fill="none" stroke="black" points="461,-1619 249,-1619 249,-1581 461,-1581 461,-1619"/>
<text text-anchor="start" x="257" y="-1603.8" font-family="Times,serif" font-size="14.00">if !pdev&#45;&gt;dev.parent</text>
<text text-anchor="middle" x="355" y="-1588.8" font-family="Times,serif" font-size="14.00">pdev&#45;&gt;dev.parent = &amp;platform_bus</text>
</g>
<!-- a2&#45;&gt;b0 -->
<g id="edge6" class="edge">
<title>a2:e&#45;&gt;b0:w</title>
<path fill="none" stroke="black" d="M250,-1684C250,-1684 248,-1600 248,-1600"/>
</g>
<!-- b1 -->
<g id="node5" class="node">
<title>b1</title>
<polygon fill="none" stroke="black" points="468.5,-1545 241.5,-1545 241.5,-1509 468.5,-1509 468.5,-1545"/>
<text text-anchor="middle" x="355" y="-1523.3" font-family="Times,serif" font-size="14.00">pdev&#45;&gt;dev.bus = &amp;platform_bus_type</text>
</g>
<!-- b0&#45;&gt;b1 -->
<g id="edge3" class="edge">
<title>b0:s&#45;&gt;b1:n</title>
<path fill="none" stroke="black" d="M355,-1581C355,-1581 355,-1565.86 355,-1555.22"/>
<polygon fill="black" stroke="black" points="358.5,-1555 355,-1545 351.5,-1555 358.5,-1555"/>
</g>
<!-- b2 -->
<g id="node6" class="node">
<title>b2</title>
<polygon fill="none" stroke="black" points="483.5,-1473 226.5,-1473 226.5,-1437 483.5,-1437 483.5,-1473"/>
<text text-anchor="middle" x="355" y="-1451.3" font-family="Times,serif" font-size="14.00">struct platform_device:pdev&#45;&gt;resource处理</text>
</g>
<!-- b1&#45;&gt;b2 -->
<g id="edge4" class="edge">
<title>b1:s&#45;&gt;b2:n</title>
<path fill="none" stroke="black" d="M355,-1509C355,-1509 355,-1493.86 355,-1483.22"/>
<polygon fill="black" stroke="black" points="358.5,-1483 355,-1473 351.5,-1483 358.5,-1483"/>
</g>
<!-- b3 -->
<g id="node7" class="node">
<title>b3</title>
<polygon fill="none" stroke="black" points="433.5,-1401 276.5,-1401 276.5,-1365 433.5,-1365 433.5,-1401"/>
<text text-anchor="middle" x="355" y="-1379.3" font-family="Times,serif" font-size="14.00">device_add(&amp;pdev&#45;&gt;dev)</text>
</g>
<!-- b2&#45;&gt;b3 -->
<g id="edge5" class="edge">
<title>b2:s&#45;&gt;b3:n</title>
<path fill="none" stroke="black" d="M355,-1437C355,-1437 355,-1421.86 355,-1411.22"/>
<polygon fill="black" stroke="black" points="358.5,-1411 355,-1401 351.5,-1411 358.5,-1411"/>
</g>
<!-- c0 -->
<g id="node8" class="node">
<title>c0</title>
<polygon fill="none" stroke="black" points="687.5,-1318 434.5,-1318 434.5,-1282 687.5,-1282 687.5,-1318"/>
<text text-anchor="middle" x="561" y="-1296.3" font-family="Times,serif" font-size="14.00">device_private_init(dev);私有数据初始化</text>
</g>
<!-- b3&#45;&gt;c0 -->
<g id="edge24" class="edge">
<title>b3:e&#45;&gt;c0:w</title>
<path fill="none" stroke="black" d="M435,-1383C435,-1383 433.78,-1332.34 433.25,-1310.18"/>
<polygon fill="black" stroke="black" points="436.74,-1309.91 433,-1300 429.74,-1310.08 436.74,-1309.91"/>
</g>
<!-- c1 -->
<g id="node9" class="node">
<title>c1</title>
<polygon fill="none" stroke="black" points="687,-1246 435,-1246 435,-1208 687,-1208 687,-1246"/>
<text text-anchor="start" x="443" y="-1230.8" font-family="Times,serif" font-size="14.00">kobj = get_device_parent()</text>
<text text-anchor="middle" x="561" y="-1215.8" font-family="Times,serif" font-size="14.00">kobject_add(&amp;dev&#45;&gt;kobj,dev&#45;&gt;kobj.parent</text>
</g>
<!-- c0&#45;&gt;c1 -->
<g id="edge7" class="edge">
<title>c0:s&#45;&gt;c1:n</title>
<path fill="none" stroke="black" d="M561,-1282C561,-1282 561,-1266.86 561,-1256.22"/>
<polygon fill="black" stroke="black" points="564.5,-1256 561,-1246 557.5,-1256 564.5,-1256"/>
</g>
<!-- c2 -->
<g id="node10" class="node">
<title>c2</title>
<polygon fill="none" stroke="black" points="684,-1172 438,-1172 438,-1136 684,-1136 684,-1172"/>
<text text-anchor="middle" x="561" y="-1150.3" font-family="Times,serif" font-size="14.00">device_platform_notify(dev,KOBJ_ADD)</text>
</g>
<!-- c1&#45;&gt;c2 -->
<g id="edge8" class="edge">
<title>c1:s&#45;&gt;c2:n</title>
<path fill="none" stroke="black" d="M561,-1208C561,-1208 561,-1192.86 561,-1182.22"/>
<polygon fill="black" stroke="black" points="564.5,-1182 561,-1172 557.5,-1182 564.5,-1182"/>
</g>
<!-- c3 -->
<g id="node11" class="node">
<title>c3</title>
<polygon fill="none" stroke="black" points="683.5,-1100 438.5,-1100 438.5,-1064 683.5,-1064 683.5,-1100"/>
<text text-anchor="middle" x="561" y="-1078.3" font-family="Times,serif" font-size="14.00">device_create_file(dev,&amp;dev_attr_uevent)</text>
</g>
<!-- c2&#45;&gt;c3 -->
<g id="edge9" class="edge">
<title>c2:s&#45;&gt;c3:n</title>
<path fill="none" stroke="black" d="M561,-1136C561,-1136 561,-1120.86 561,-1110.22"/>
<polygon fill="black" stroke="black" points="564.5,-1110 561,-1100 557.5,-1110 564.5,-1110"/>
</g>
<!-- c4 -->
<g id="node12" class="node">
<title>c4</title>
<polygon fill="none" stroke="black" points="659,-1028 463,-1028 463,-992 659,-992 659,-1028"/>
<text text-anchor="middle" x="561" y="-1006.3" font-family="Times,serif" font-size="14.00">device_add_class_symlinks(dev)</text>
</g>
<!-- c3&#45;&gt;c4 -->
<g id="edge10" class="edge">
<title>c3:s&#45;&gt;c4:n</title>
<path fill="none" stroke="black" d="M561,-1064C561,-1064 561,-1048.86 561,-1038.22"/>
<polygon fill="black" stroke="black" points="564.5,-1038 561,-1028 557.5,-1038 564.5,-1038"/>
</g>
<!-- c5 -->
<g id="node13" class="node">
<title>c5</title>
<polygon fill="none" stroke="black" points="629.5,-956 492.5,-956 492.5,-920 629.5,-920 629.5,-956"/>
<text text-anchor="middle" x="561" y="-934.3" font-family="Times,serif" font-size="14.00">device_add_attrs(dev)</text>
</g>
<!-- c4&#45;&gt;c5 -->
<g id="edge11" class="edge">
<title>c4:s&#45;&gt;c5:n</title>
<path fill="none" stroke="black" d="M561,-992C561,-992 561,-976.86 561,-966.22"/>
<polygon fill="black" stroke="black" points="564.5,-966 561,-956 557.5,-966 564.5,-966"/>
</g>
<!-- c6 -->
<g id="node14" class="node">
<title>c6</title>
<polygon fill="none" stroke="black" points="627,-884 495,-884 495,-848 627,-848 627,-884"/>
<text text-anchor="middle" x="561" y="-862.3" font-family="Times,serif" font-size="14.00">bus_add_device(dev)</text>
</g>
<!-- c5&#45;&gt;c6 -->
<g id="edge12" class="edge">
<title>c5:s&#45;&gt;c6:n</title>
<path fill="none" stroke="black" d="M561,-920C561,-920 561,-904.86 561,-894.22"/>
<polygon fill="black" stroke="black" points="564.5,-894 561,-884 557.5,-894 564.5,-894"/>
</g>
<!-- c7 -->
<g id="node15" class="node">
<title>c7</title>
<polygon fill="none" stroke="black" points="626,-812 496,-812 496,-776 626,-776 626,-812"/>
<text text-anchor="middle" x="561" y="-790.3" font-family="Times,serif" font-size="14.00">dpm_sysfs_add(dev)</text>
</g>
<!-- c6&#45;&gt;c7 -->
<g id="edge13" class="edge">
<title>c6:s&#45;&gt;c7:n</title>
<path fill="none" stroke="black" d="M561,-848C561,-848 561,-832.86 561,-822.22"/>
<polygon fill="black" stroke="black" points="564.5,-822 561,-812 557.5,-822 564.5,-822"/>
</g>
<!-- c8 -->
<g id="node16" class="node">
<title>c8</title>
<polygon fill="none" stroke="black" points="626.5,-740 495.5,-740 495.5,-704 626.5,-704 626.5,-740"/>
<text text-anchor="middle" x="561" y="-718.3" font-family="Times,serif" font-size="14.00">device_pm_add(dev)</text>
</g>
<!-- c7&#45;&gt;c8 -->
<g id="edge14" class="edge">
<title>c7:s&#45;&gt;c8:n</title>
<path fill="none" stroke="black" d="M561,-776C561,-776 561,-760.86 561,-750.22"/>
<polygon fill="black" stroke="black" points="564.5,-750 561,-740 557.5,-750 564.5,-750"/>
</g>
<!-- c9 -->
<g id="node17" class="node">
<title>c9</title>
<polygon fill="none" stroke="black" points="676,-668 446,-668 446,-632 676,-632 676,-668"/>
<text text-anchor="middle" x="561" y="-646.3" font-family="Times,serif" font-size="14.00">driver_create_file(dev,&amp;dev_attr_dev);</text>
</g>
<!-- c8&#45;&gt;c9 -->
<g id="edge15" class="edge">
<title>c8:s&#45;&gt;c9:n</title>
<path fill="none" stroke="black" d="M561,-704C561,-704 561,-688.86 561,-678.22"/>
<polygon fill="black" stroke="black" points="564.5,-678 561,-668 557.5,-678 564.5,-678"/>
</g>
<!-- c10 -->
<g id="node18" class="node">
<title>c10</title>
<polygon fill="none" stroke="black" points="663,-596 459,-596 459,-560 663,-560 663,-596"/>
<text text-anchor="middle" x="561" y="-574.3" font-family="Times,serif" font-size="14.00">device_create_sys_dev_entry(dev)</text>
</g>
<!-- c9&#45;&gt;c10 -->
<g id="edge16" class="edge">
<title>c9:s&#45;&gt;c10:n</title>
<path fill="none" stroke="black" d="M561,-632C561,-632 561,-616.86 561,-606.22"/>
<polygon fill="black" stroke="black" points="564.5,-606 561,-596 557.5,-606 564.5,-606"/>
</g>
<!-- c11 -->
<g id="node19" class="node">
<title>c11</title>
<polygon fill="none" stroke="black" points="631,-524 491,-524 491,-488 631,-488 631,-524"/>
<text text-anchor="middle" x="561" y="-502.3" font-family="Times,serif" font-size="14.00">devtmpfs_create_node</text>
</g>
<!-- c10&#45;&gt;c11 -->
<g id="edge17" class="edge">
<title>c10:s&#45;&gt;c11:n</title>
<path fill="none" stroke="black" d="M561,-560C561,-560 561,-544.86 561,-534.22"/>
<polygon fill="black" stroke="black" points="564.5,-534 561,-524 557.5,-534 564.5,-534"/>
</g>
<!-- c12 -->
<g id="node20" class="node">
<title>c12</title>
<polygon fill="none" stroke="black" points="731,-452 391,-452 391,-399 731,-399 731,-452"/>
<text text-anchor="start" x="399" y="-436.8" font-family="Times,serif" font-size="14.00">if(dev&#45;&gt;bus)</text>
<text text-anchor="middle" x="561" y="-421.8" font-family="Times,serif" font-size="14.00">blocking_notifier_call_chain(&amp;dev&#45;&gt;bus&#45;&gt;p&#45;&gt;bus_notifier,</text>
<text text-anchor="middle" x="561" y="-406.8" font-family="Times,serif" font-size="14.00">BUS_NOTIFY_ADD_DEVICE,dev)</text>
</g>
<!-- c11&#45;&gt;c12 -->
<g id="edge18" class="edge">
<title>c11:s&#45;&gt;c12:n</title>
<path fill="none" stroke="black" d="M561,-488C561,-488 561,-472.86 561,-462.22"/>
<polygon fill="black" stroke="black" points="564.5,-462 561,-452 557.5,-462 564.5,-462"/>
</g>
<!-- c13 -->
<g id="node21" class="node">
<title>c13</title>
<polygon fill="none" stroke="black" points="684,-363 438,-363 438,-327 684,-327 684,-363"/>
<text text-anchor="middle" x="561" y="-341.3" font-family="Times,serif" font-size="14.00">koject_uevent(&amp;dev&#45;&gt;kobj,KOBJ_ADD);</text>
</g>
<!-- c12&#45;&gt;c13 -->
<g id="edge19" class="edge">
<title>c12:s&#45;&gt;c13:n</title>
<path fill="none" stroke="black" d="M561,-399C561,-399 561,-383.86 561,-373.22"/>
<polygon fill="black" stroke="black" points="564.5,-373 561,-363 557.5,-373 564.5,-373"/>
</g>
<!-- c14 -->
<g id="node22" class="node">
<title>c14</title>
<polygon fill="none" stroke="black" points="634.5,-291 487.5,-291 487.5,-255 634.5,-255 634.5,-291"/>
<text text-anchor="middle" x="561" y="-269.3" font-family="Times,serif" font-size="14.00">bus_probe_device(dev);</text>
</g>
<!-- c13&#45;&gt;c14 -->
<g id="edge20" class="edge">
<title>c13:s&#45;&gt;c14:n</title>
<path fill="none" stroke="black" d="M561,-327C561,-327 561,-311.86 561,-301.22"/>
<polygon fill="black" stroke="black" points="564.5,-301 561,-291 557.5,-301 564.5,-301"/>
</g>
<!-- c15 -->
<g id="node23" class="node">
<title>c15</title>
<polygon fill="none" stroke="black" points="741.5,-219 380.5,-219 380.5,-183 741.5,-183 741.5,-219"/>
<text text-anchor="middle" x="561" y="-197.3" font-family="Times,serif" font-size="14.00">klist_add_tail:p&#45;&gt;knode_parent &#45;&#45;&#45;&gt; parent&#45;&gt;p&#45;&gt;klist_children)</text>
</g>
<!-- c14&#45;&gt;c15 -->
<g id="edge21" class="edge">
<title>c14:s&#45;&gt;c15:n</title>
<path fill="none" stroke="black" d="M561,-255C561,-255 561,-239.86 561,-229.22"/>
<polygon fill="black" stroke="black" points="564.5,-229 561,-219 557.5,-229 564.5,-229"/>
</g>
<!-- c16 -->
<g id="node24" class="node">
<title>c16</title>
<polygon fill="none" stroke="black" points="728.5,-147 393.5,-147 393.5,-111 728.5,-111 728.5,-147"/>
<text text-anchor="middle" x="561" y="-125.3" font-family="Times,serif" font-size="14.00">klist_add_tail:p&#45;&gt;node_class &#45;&#45;&gt; class&#45;&gt;p&#45;&gt;klist_devices);</text>
</g>
<!-- c15&#45;&gt;c16 -->
<g id="edge22" class="edge">
<title>c15:s&#45;&gt;c16:n</title>
<path fill="none" stroke="black" d="M561,-183C561,-183 561,-167.86 561,-157.22"/>
<polygon fill="black" stroke="black" points="564.5,-157 561,-147 557.5,-157 564.5,-157"/>
</g>
<!-- c17 -->
<g id="node25" class="node">
<title>c17</title>
<polygon fill="none" stroke="black" points="687,-75 435,-75 435,-39 687,-39 687,-75"/>
<text text-anchor="middle" x="561" y="-53.3" font-family="Times,serif" font-size="14.00">notify:通知链接到设备的所有接口设备</text>
</g>
<!-- c16&#45;&gt;c17 -->
<g id="edge23" class="edge">
<title>c16:s&#45;&gt;c17:n</title>
<path fill="none" stroke="black" d="M561,-111C561,-111 561,-95.86 561,-85.22"/>
<polygon fill="black" stroke="black" points="564.5,-85 561,-75 557.5,-85 564.5,-85"/>
</g>
</g>
</svg>
